<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ì¹´í”¼ ì˜ìƒ - ì½”ë“œë•ì¿ </title>
<link rel="stylesheet" href="css/style.css">
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Noto+Sans+KR:wght@400;500;700&display=swap" rel="stylesheet">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.4.0/css/all.min.css">
<style>
:root {
  --red: #dc2626;
  --red-lt: #fff1f2;
  --red-bd: #fca5a5;
  --red-md: #fee2e2;
}
/* â”€â”€ ì˜ìƒ í˜ì´ì§€ ê³µí†µ â”€â”€ */
.video-hero {
  background: linear-gradient(135deg, #1a0000 0%, #3b0a0a 40%, #1f0505 100%);
  padding: 36px 24px 28px;
  text-align: center;
  color: #fff;
}
.video-hero-badge {
  display: inline-flex; align-items: center; gap: 6px;
  background: rgba(220,38,38,.25); border: 1px solid rgba(252,165,165,.4);
  border-radius: 20px; padding: 4px 14px; font-size: .75rem; font-weight: 700;
  color: #fca5a5; margin-bottom: 14px;
}
.video-hero h1 { font-size: 2rem; font-weight: 800; margin: 0 0 8px; }
.video-hero h1 span { color: #f87171; }
.video-hero p { font-size: .9rem; color: #fca5a5; margin: 0; }

/* â”€â”€ ë©”ì¸ ë ˆì´ì•„ì›ƒ â”€â”€ */
.video-layout {
  max-width: 1200px;
  margin: 0 auto;
  padding: 28px 20px 60px;
  display: grid;
  grid-template-columns: 1fr;
  gap: 20px;
}

/* â”€â”€ ë“±ë¡ í¼ (ê´€ë¦¬ììš©) â”€â”€ */
.video-add-form {
  background: #fff;
  border: 1.5px solid #fca5a5;
  border-radius: 16px;
  padding: 20px 24px;
}
.video-add-form h3 {
  font-size: 1rem; font-weight: 700; color: #dc2626;
  margin: 0 0 14px; display: flex; align-items: center; gap: 8px;
}
.form-row { display: flex; gap: 10px; flex-wrap: wrap; }
.form-row input, .form-row textarea {
  flex: 1; min-width: 200px;
  padding: 9px 14px; border: 1.5px solid #e5e7eb; border-radius: 10px;
  font-size: .85rem; font-family: inherit; outline: none; transition: border .15s;
}
.form-row input:focus, .form-row textarea:focus { border-color: #f87171; }
.btn-add {
  padding: 9px 22px; background: #dc2626; color: #fff;
  border: none; border-radius: 10px; font-size: .85rem; font-weight: 700;
  cursor: pointer; white-space: nowrap; transition: background .15s;
}
.btn-add:hover { background: #b91c1c; }

/* â”€â”€ ì˜ìƒ ê·¸ë¦¬ë“œ â”€â”€ */
.video-grid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(320px, 1fr));
  gap: 20px;
}
.video-card {
  background: #fff;
  border-radius: 16px;
  overflow: hidden;
  box-shadow: 0 2px 12px rgba(0,0,0,.07);
  border: 1px solid #f3f4f6;
  transition: transform .2s, box-shadow .2s;
}
.video-card:hover { transform: translateY(-4px); box-shadow: 0 8px 28px rgba(0,0,0,.12); }
.video-thumb {
  position: relative; width: 100%; padding-top: 56.25%; /* 16:9 */
  background: #1a1a1a; overflow: hidden;
}
.video-thumb iframe {
  position: absolute; inset: 0; width: 100%; height: 100%; border: none;
}
.video-thumb-placeholder {
  position: absolute; inset: 0;
  display: flex; flex-direction: column; align-items: center; justify-content: center;
  background: linear-gradient(135deg, #1c1c1c, #2d1010);
  color: #fca5a5; gap: 8px; cursor: pointer;
}
.video-thumb-placeholder i { font-size: 2.5rem; color: #f87171; }
.video-thumb-placeholder span { font-size: .8rem; font-weight: 600; }
.video-info {
  padding: 14px 16px 16px;
}
.video-info h4 {
  font-size: .95rem; font-weight: 700; color: #111827;
  margin: 0 0 6px; line-height: 1.4;
  display: -webkit-box; -webkit-line-clamp: 2; -webkit-box-orient: vertical; overflow: hidden;
}
.video-info p {
  font-size: .78rem; color: #6b7280; margin: 0 0 10px;
  display: -webkit-box; -webkit-line-clamp: 2; -webkit-box-orient: vertical; overflow: hidden;
}
.video-meta {
  display: flex; align-items: center; justify-content: space-between;
}
.video-tag {
  display: inline-flex; align-items: center; gap: 4px;
  background: var(--red-md); color: var(--red); border-radius: 20px;
  font-size: .7rem; font-weight: 700; padding: 2px 10px;
}
.video-date { font-size: .72rem; color: #9ca3af; }
.video-actions { display: flex; gap: 6px; margin-top: 10px; }
.btn-watch {
  flex: 1; padding: 7px 0; background: #dc2626; color: #fff;
  border: none; border-radius: 8px; font-size: .8rem; font-weight: 700;
  cursor: pointer; transition: background .15s; text-decoration: none;
  display: flex; align-items: center; justify-content: center; gap: 6px;
}
.btn-watch:hover { background: #b91c1c; }
.btn-delete-video {
  padding: 7px 12px; background: #f9fafb; color: #9ca3af;
  border: 1.5px solid #e5e7eb; border-radius: 8px; font-size: .78rem;
  cursor: pointer; transition: all .15s;
}
.btn-delete-video:hover { background: #fee2e2; color: #dc2626; border-color: #fca5a5; }

/* â”€â”€ ëª¨ë‹¬ í”Œë ˆì´ì–´ â”€â”€ */
.video-modal-overlay {
  display: none; position: fixed; inset: 0;
  background: rgba(0,0,0,.85); z-index: 9000;
  align-items: center; justify-content: center;
}
.video-modal-overlay.open { display: flex; }
.video-modal {
  background: #111; border-radius: 16px; overflow: hidden;
  width: min(860px, 95vw); box-shadow: 0 20px 60px rgba(0,0,0,.6);
}
.video-modal-header {
  display: flex; align-items: center; justify-content: space-between;
  padding: 12px 16px; background: #1a1a1a; border-bottom: 1px solid #333;
}
.video-modal-header h4 { color: #f9fafb; font-size: .92rem; margin: 0; flex: 1; padding-right: 12px; }
.modal-close-btn {
  background: none; border: none; color: #9ca3af; font-size: 1.4rem;
  cursor: pointer; line-height: 1; padding: 4px;
}
.modal-close-btn:hover { color: #f87171; }
.video-modal-player { position: relative; padding-top: 56.25%; background: #000; }
.video-modal-player iframe { position: absolute; inset: 0; width: 100%; height: 100%; border: none; }

/* â”€â”€ ë¹ˆ ìƒíƒœ â”€â”€ */
.video-empty {
  grid-column: 1/-1; text-align: center; padding: 60px 20px;
  color: #9ca3af;
}
.video-empty i { font-size: 3rem; color: #fca5a5; margin-bottom: 16px; display: block; }
.video-empty p { font-size: 1rem; font-weight: 600; color: #6b7280; }
.video-empty span { font-size: .85rem; }

/* â”€â”€ ê²€ìƒ‰/í•„í„° ë°” â”€â”€ */
.video-toolbar {
  display: flex; align-items: center; gap: 10px; flex-wrap: wrap;
  background: #fff; border-radius: 14px; padding: 14px 18px;
  border: 1px solid #f3f4f6; box-shadow: 0 1px 4px rgba(0,0,0,.05);
}
.video-toolbar input {
  flex: 1; min-width: 200px; padding: 8px 14px;
  border: 1.5px solid #e5e7eb; border-radius: 10px;
  font-size: .85rem; font-family: inherit; outline: none;
}
.video-toolbar input:focus { border-color: #f87171; }
.video-count { font-size: .82rem; color: #6b7280; white-space: nowrap; }

@media (max-width: 640px) {
  .video-hero h1 { font-size: 1.4rem; }
  .video-grid { grid-template-columns: 1fr; }
  .form-row { flex-direction: column; }
}
.btn-like {
  padding: 7px 12px; background: #fff0f0; color: #dc2626;
  border: 1.5px solid #fca5a5; border-radius: 8px; font-size: .78rem;
  cursor: pointer; transition: all .15s; display: inline-flex;
  align-items: center; gap: 4px; font-weight: 700;
}
.btn-like:hover { background: #fee2e2; }
.btn-like.liked { background: #dc2626; color: #fff; border-color: #dc2626; }
.video-hof-wrap {
  background: linear-gradient(160deg,#0f0c29,#1a1a4e,#24243e);
  border-radius: 18px; padding: 12px 16px 14px; margin-bottom: 4px;
}
.video-hof-title {
  text-align: center; margin-bottom: 8px;
}
.video-hof-title .hof-emoji { font-size: 1.3rem; display: block; margin-bottom: 2px; }
.video-hof-title h3 {
  font-size: .88rem; font-weight: 900; color: #f0e6ff; margin: 0 0 2px;
  letter-spacing: .03em;
}
.video-hof-title p { font-size: .68rem; color: #a5b4fc; margin: 0; }
.video-hof-title { text-align: center; margin-bottom: 14px; }
.video-hof-title .hof-emoji { font-size: 1.6rem; display: block; margin-bottom: 4px; }
.video-hof-title h3 { font-size: .95rem; font-weight: 900; color: #f0e6ff; margin: 0 0 3px; }
.video-hof-title p { font-size: .72rem; color: #a5b4fc; margin: 0; }
.video-hof-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(200px, 1fr)); gap: 10px; }
.video-hof-card { border-radius: 12px; padding: 12px 14px; cursor: pointer; transition: transform .15s; position: relative; overflow: hidden; }
.video-hof-card:hover { transform: translateY(-2px); }
.video-hof-card .hof-rank { font-size: 1.4rem; margin-bottom: 5px; }
.video-hof-card .hof-card-title { font-size: .82rem; font-weight: 800; line-height: 1.3; margin-bottom: 5px; display: -webkit-box; -webkit-line-clamp: 2; -webkit-box-orient: vertical; overflow: hidden; }
.video-hof-card .hof-likes { font-size: .72rem; color: #dc2626; font-weight: 700; display: flex; align-items: center; gap: 3px; }
.video-hof-card .hof-arrow { font-size: .6rem; color: #d97706; font-weight: 700; margin-top: 5px; display: flex; align-items: center; gap: 3px; }
.video-hof-empty { background: rgba(255,255,255,.04); border: 1.5px dashed rgba(255,255,255,.15); border-radius: 10px; padding: 14px; text-align: center; color: #64748b; font-size: .75rem; }
</style>
</head>
<body>
<script src="js/ads.js"></script>
<header class="header">
  <div class="header-inner">
    <a href="index.html" class="logo">
      <i class="fas fa-guitar logo-icon"></i>
      <div class="logo-textbox">
        <span class="logo-text">Code<span class="acc">ducku</span></span>
        <span class="logo-ko">ì½”ë“œë•ì¿ </span>
      </div>
    </a>
    <span class="logo-badge">ì¹´í”¼ ì˜ìƒ</span>
    <nav class="header-nav" id="headerNav">
      <div class="header-nav-row1">
        <div class="nav-info-group">
          <a href="rehearsal.html" class="nav-btn"><i class="fas fa-music"></i> í•©ì£¼ì‹¤</a>
          <a href="repair.html" class="nav-btn"><i class="fas fa-tools"></i> ë¦¬í˜ì–´ìƒµ</a>
          <a href="instrument.html" class="nav-btn"><i class="fas fa-guitar"></i> ì•…ê¸°ìƒµ</a>
          <a href="academy.html" class="nav-btn"><i class="fas fa-school"></i> ìŒì•…í•™ì›</a>
          <a href="venue.html" class="nav-btn"><i class="fas fa-theater-masks"></i> ê³µì—°ì¥</a>
        </div>
        <div class="nav-service-group">
          <a href="score.html" class="nav-btn"><i class="fas fa-file-pdf"></i> ì•…ë³´ê³µìœ </a>
          <a href="analyze.html" class="nav-btn"><i class="fas fa-waveform-path"></i> ìŒì›ë¶„ì„</a>
        </div>
      </div>
      <div class="header-nav-row2">
        <div class="nav-community-group">
          <a href="community.html" class="nav-btn"><i class="fas fa-comment-dots"></i> ììœ ê²Œì‹œíŒ</a>
          <a href="community.html?cat=gear" class="nav-btn"><i class="fas fa-sliders-h"></i> ì¥ë¹„ë¦¬ë·°</a>
          <a href="community.html?cat=band" class="nav-btn"><i class="fas fa-user-friends"></i> ë°´ë“œêµ¬ì¸êµ¬ì§</a>
          <a href="community.html?cat=lesson" class="nav-btn"><i class="fas fa-chalkboard-teacher"></i> ê°œì¸ë ˆìŠ¨</a>
          <a href="community.html?cat=market" class="nav-btn"><i class="fas fa-tag"></i> ì¤‘ê³ ì¥í„°</a>
        </div>
        <div class="nav-video-group">
          <a href="video-review.html" class="nav-btn"><i class="fas fa-star"></i> ë¦¬ë·°ì˜ìƒ</a>
          <a href="video-cover.html" class="nav-btn active"><i class="fas fa-music"></i> ì¹´í”¼ì˜ìƒ</a>
          <a href="video-fun.html" class="nav-btn"><i class="fas fa-laugh"></i> ì¬ë¯¸ìˆëŠ”ì˜ìƒ</a>
          <a href="video-bandstage.html" class="nav-btn"><i class="fas fa-drum"></i> ë°´ë“œë¼ì´ë¸Œ</a>
        </div>
      </div>
    </nav>
    <div class="header-auth-btns">
      <a href="login.html" class="nav-btn nav-btn--login" id="headerLoginBtn"><i class="fas fa-sign-in-alt"></i> ë¡œê·¸ì¸</a>
      <a href="profile.html" class="header-profile-btn" id="headerProfileBtn" style="display:none"><i class="fas fa-user-circle"></i><span id="headerNickname"></span></a>
      <button class="nav-btn nav-btn--logout" id="headerLogoutBtn" style="display:none" onclick="authLogout()"><i class="fas fa-sign-out-alt"></i> ë¡œê·¸ì•„ì›ƒ</button>
    </div>
    <button class="hamburger-btn" id="hamburgerBtn" aria-label="ë©”ë‰´ ì—´ê¸°"><span></span><span></span><span></span></button>
  </div>
  <div class="mobile-menu" id="mobileMenu">
    <a href="index.html" class="mobile-menu-item"><i class="fas fa-home" style="color:#e85d04"></i> í™ˆ</a>
    <div style="padding:4px 12px 2px;font-size:.68rem;font-weight:800;color:#059669;">ğŸ“ ì •ë³´</div>
    <a href="rehearsal.html" class="mobile-menu-item"><i class="fas fa-music" style="color:#0369a1"></i> í•©ì£¼ì‹¤</a>
    <a href="repair.html" class="mobile-menu-item"><i class="fas fa-tools" style="color:#7c3aed"></i> ë¦¬í˜ì–´ìƒµ</a>
    <a href="instrument.html" class="mobile-menu-item"><i class="fas fa-guitar" style="color:#0f766e"></i> ì•…ê¸°ìƒµ</a>
    <a href="academy.html" class="mobile-menu-item"><i class="fas fa-school" style="color:#d45d00"></i> ìŒì•…í•™ì›</a>
    <a href="venue.html" class="mobile-menu-item"><i class="fas fa-theater-masks" style="color:#7c3aed"></i> ê³µì—°ì¥</a>
    <div style="border-top:1px solid #e5e7eb;margin:4px 0;"></div>
    <div style="padding:4px 12px 2px;font-size:.68rem;font-weight:800;color:#ea580c;">ğŸ’¬ ì»¤ë®¤ë‹ˆí‹°</div>
    <a href="community.html" class="mobile-menu-item"><i class="fas fa-comment-dots" style="color:#f97316"></i> ììœ ê²Œì‹œíŒ</a>
    <a href="community.html?cat=gear" class="mobile-menu-item"><i class="fas fa-sliders-h" style="color:#f97316"></i> ì¥ë¹„ë¦¬ë·°</a>
    <a href="community.html?cat=band" class="mobile-menu-item"><i class="fas fa-user-friends" style="color:#f97316"></i> ë°´ë“œêµ¬ì¸êµ¬ì§</a>
    <a href="community.html?cat=lesson" class="mobile-menu-item"><i class="fas fa-chalkboard-teacher" style="color:#f97316"></i> ê°œì¸ë ˆìŠ¨</a>
    <a href="community.html?cat=market" class="mobile-menu-item"><i class="fas fa-tag" style="color:#f97316"></i> ì¤‘ê³ ì¥í„°</a>
    <div style="border-top:1px solid #e5e7eb;margin:4px 0;"></div>
    <div style="padding:4px 12px 2px;font-size:.68rem;font-weight:800;color:#7c3aed;">ğŸµ ì½”ë•ì„œë¹„ìŠ¤</div>
    <a href="score.html" class="mobile-menu-item"><i class="fas fa-file-pdf" style="color:#6d28d9"></i> ì•…ë³´ê³µìœ </a>
    <a href="analyze.html" class="mobile-menu-item"><i class="fas fa-waveform-path" style="color:#7c3aed"></i> ìŒì›ë¶„ì„</a>
    <div style="border-top:1px solid #e5e7eb;margin:4px 0;"></div>
    <div style="padding:4px 12px 2px;font-size:.68rem;font-weight:800;color:#dc2626;">ğŸ¬ ì˜ìƒ</div>
    <a href="video-review.html" class="mobile-menu-item"><i class="fas fa-star" style="color:#dc2626"></i> ë¦¬ë·°ì˜ìƒ</a>
    <a href="video-cover.html" class="mobile-menu-item"><i class="fas fa-music" style="color:#dc2626"></i> ì¹´í”¼ì˜ìƒ</a>
    <a href="video-fun.html" class="mobile-menu-item"><i class="fas fa-laugh" style="color:#dc2626"></i> ì¬ë¯¸ìˆëŠ”ì˜ìƒ</a>
    <a href="video-bandstage.html" class="mobile-menu-item"><i class="fas fa-drum" style="color:#dc2626"></i> ë°´ë“œë¼ì´ë¸Œ</a>
    <div style="border-top:1px solid #e5e7eb;margin-top:4px;padding-top:4px">
      <a href="login.html" class="mobile-menu-item" id="mobileLoginBtn"><i class="fas fa-sign-in-alt"></i> ë¡œê·¸ì¸ / íšŒì›ê°€ì…</a>
      <button class="mobile-menu-item" id="mobileLogoutBtn" style="display:none;background:none;border:none;width:100%;text-align:left;cursor:pointer;font-family:inherit;" onclick="authLogout()"><i class="fas fa-sign-out-alt"></i> ë¡œê·¸ì•„ì›ƒ</button>
    </div>
  </div>
</header>

<!-- íˆì–´ë¡œ -->
<div class="video-hero">
  <div class="video-hero-badge"><i class="fab fa-youtube"></i> ì¹´í”¼ ì˜ìƒ</div>
  <h1>ğŸµ <span>ì»¤ë²„ &amp; ì¹´í”¼</span> ì˜ìƒ</h1>
  <p>ì¢‹ì•„í•˜ëŠ” ê³¡ì„ ì—°ì£¼í•œ ì»¤ë²„/ì¹´í”¼ ì˜ìƒì„ ëª¨ì•„ë´¤ì–´ìš”</p>
</div>

<div class="video-layout">

  <!-- ì¿ ìŠë­ ê°€ì´ë“œ HOF -->
  <div id="videoHofContainer"></div>

  <!-- ì½”ë“œë•ì¿  í™ë³´ ë°°ë„ˆ -->
  <div class="hof-promo-banner">
    <div class="hof-promo-grid">
      <a href="video-review.html" class="hof-promo-item">
        <span class="hof-promo-icon">â­</span>
        <div class="hof-promo-text"><strong>ë¦¬ë·° ì˜ìƒ</strong><span>ì•…ê¸° Â· ì¥ë¹„ ë¦¬ë·° ì˜ìƒ ëª¨ìŒ</span></div>
      </a>
      <a href="video-fun.html" class="hof-promo-item">
        <span class="hof-promo-icon">ğŸ˜‚</span>
        <div class="hof-promo-text"><strong>ì¬ë¯¸ìˆëŠ” ì˜ìƒ</strong><span>ìŒì•… ë°ˆ Â· ì›ƒê¸´ ì—°ì£¼ ëª¨ìŒ</span></div>
      </a>
      <a href="community.html?cat=band" class="hof-promo-item">
        <span class="hof-promo-icon">ğŸ¸</span>
        <div class="hof-promo-text"><strong>ë°´ë“œ êµ¬ì¸êµ¬ì§</strong><span>í•¨ê»˜í•  ë©¤ë²„ë¥¼ ì°¾ì•„ë³´ì„¸ìš”</span></div>
      </a>
      <a href="analyze.html" class="hof-promo-item hof-promo-item--analyze">
        <span class="hof-promo-icon">ğŸµ</span>
        <div class="hof-promo-text"><strong>ìŒì› ë¶„ì„</strong><span>MP3 ì˜¬ë¦¬ë©´ ì½”ë“œ ì•…ë³´ ìë™ ìƒì„±!</span></div>
      </a>
      <div class="hof-promo-item hof-promo-item--cta">
        <span class="hof-promo-icon">ğŸ‹</span>
        <div class="hof-promo-text"><strong>ì¿ ìŠë­ ê°€ì´ë“œ</strong><span>ë§ˆìŒì— ë“œëŠ” ì˜ìƒì— â¤ï¸ë¥¼ ëˆŒëŸ¬ì£¼ì„¸ìš”!</span></div>
      </div>
    </div>
  </div>
  <!-- ì½”ë“œë•ì¿  í™ë³´ ì´ë¯¸ì§€ ë°°ë„ˆ -->
  <a href="analyze.html" class="page-promo-banner">
    <img src="images/banner-video-cover.jpg" alt="ì½”ë“œë•ì¿  ìŒì› ì•ˆì „ ë¶„ì„">
    <div class="page-promo-banner-overlay">
      <span class="page-promo-banner-label">âœ¦ Codeducku ì„œë¹„ìŠ¤ ì†Œê°œ</span>
      <span class="page-promo-banner-title">ìŒì› ë¶„ì„ â€” ë‚´ PCì—ì„œ ë¡œì»¬ë¡œ ì•ˆì „í•˜ê²Œ!</span>
      <span class="page-promo-banner-sub">íŒŒì¼ ì—…ë¡œë“œ ì—†ìŒ Â· ì„œë²„ ì „ì†¡ ì—†ìŒ Â· ì €ì‘ê¶Œ ê±±ì • ì—†ìŒ â€” ê¸°íƒ€ ì½”ë“œ ì•…ë³´ ìë™ ìƒì„±</span>
      <span class="page-promo-banner-cta">ìŒì› ë¶„ì„ í•´ë³´ê¸° â†’</span>
    </div>
  </a>

  <!-- ì˜ìƒ ë“±ë¡ í¼ -->
  <div class="video-add-form" id="addFormSection">
    <h3><i class="fas fa-plus-circle"></i> ì˜ìƒ ë“±ë¡</h3>
    <div class="form-row" style="margin-bottom:10px;">
      <input type="text" id="inputTitle" placeholder="ì˜ìƒ ì œëª© *" maxlength="80">
      <input type="text" id="inputUrl" placeholder="ìœ íŠœë¸Œ URL * (ì˜ˆ: https://youtu.be/xxxxx)">
    </div>
    <div class="form-row">
      <input type="text" id="inputDesc" placeholder="ê°„ë‹¨í•œ ì„¤ëª… (ì„ íƒ)">
      <button class="btn-add" onclick="addVideo()"><i class="fas fa-plus"></i> ë“±ë¡</button>
    </div>
  </div>

  <!-- ê²€ìƒ‰ íˆ´ë°” -->
  <div class="video-toolbar">
    <input type="text" id="searchInput" placeholder="ì˜ìƒ ì œëª©ìœ¼ë¡œ ê²€ìƒ‰..." oninput="renderVideos()">
    <span class="video-count" id="videoCount">0ê°œì˜ ì˜ìƒ</span>
  </div>

  <!-- ì˜ìƒ ê·¸ë¦¬ë“œ -->
  <div class="video-grid" id="videoGrid"></div>

</div>

<!-- ì˜ìƒ ëª¨ë‹¬ í”Œë ˆì´ì–´ -->
<div class="video-modal-overlay" id="videoModal" onclick="closeVideoModal(event)">
  <div class="video-modal">
    <div class="video-modal-header">
      <h4 id="modalTitle">ì˜ìƒ ì œëª©</h4>
      <div style="display:flex;align-items:center;gap:8px;flex-shrink:0;">
        <a id="modalYoutubeLink" href="" target="_blank" rel="noopener"
           style="display:inline-flex;align-items:center;gap:5px;padding:4px 11px;background:#ff0000;color:#fff;border-radius:8px;font-size:.75rem;font-weight:700;text-decoration:none;">
          <i class="fab fa-youtube"></i> YouTubeì—ì„œ ë³´ê¸°
        </a>
        <button class="modal-close-btn" onclick="closeModal()"><i class="fas fa-times"></i></button>
      </div>
    </div>
    <div class="video-modal-player">
      <iframe id="modalIframe" src="" allowfullscreen
        allow="accelerometer; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
        referrerpolicy="strict-origin-when-cross-origin"></iframe>
    </div>
    <div id="modalError" style="display:none;padding:20px 16px;background:#1a1a1a;text-align:center;">
      <p style="color:#fca5a5;font-size:.85rem;margin:0 0 10px;">âš ï¸ ì´ ì˜ìƒì€ ì„ë² ë“œê°€ ì œí•œëœ ì˜ìƒì…ë‹ˆë‹¤.</p>
      <a id="modalErrorLink" href="" target="_blank" rel="noopener"
         style="display:inline-flex;align-items:center;gap:6px;padding:8px 18px;background:#ff0000;color:#fff;border-radius:10px;font-size:.85rem;font-weight:700;text-decoration:none;">
        <i class="fab fa-youtube"></i> YouTubeì—ì„œ ì§ì ‘ ë³´ê¸°
      </a>
    </div>
  </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2/dist/umd/supabase.min.js"></script>
<script src="js/auth.js"></script>
<script src="js/auth-header.js"></script>
<script>
// â”€â”€ ìŠ¤í† ë¦¬ì§€ í‚¤ â”€â”€
const STORAGE_KEY = 'codeducku_videos_cover';
const LIKES_KEY   = 'codeducku_likes_cover';

function loadLikes() {
  try { return JSON.parse(localStorage.getItem(LIKES_KEY)) || {}; } catch { return {}; }
}
function saveLikes(obj) { localStorage.setItem(LIKES_KEY, JSON.stringify(obj)); }
function getLikeCount(videoId) { return loadLikes()[videoId] || 0; }
function isLikedByMe(videoId) {
  try { const m = JSON.parse(localStorage.getItem('codeducku_my_likes_cover')) || {}; return !!m[videoId]; } catch { return false; }
}
function toggleLike(videoId) {
  const myK = 'codeducku_my_likes_cover';
  let myL = {}; try { myL = JSON.parse(localStorage.getItem(myK)) || {}; } catch {}
  const likes = loadLikes(); const was = !!myL[videoId];
  if (was) { delete myL[videoId]; likes[videoId] = Math.max(0, (likes[videoId]||1)-1); }
  else { myL[videoId] = 1; likes[videoId] = (likes[videoId]||0)+1; }
  localStorage.setItem(myK, JSON.stringify(myL)); saveLikes(likes);
  renderVideos(); renderVideoHof();
}
function renderVideoHof() {
  const hof = document.getElementById('videoHofContainer'); if (!hof) return;
  const videos = loadVideos(); const likes = loadLikes();
  const sorted = [...videos].sort((a,b)=>(likes[b.id]||0)-(likes[a.id]||0)); const top = sorted.slice(0,5);
  const rankMedal=['ğŸ¥‡','ğŸ¥ˆ','ğŸ¥‰','4ìœ„','5ìœ„'];
  const rankBg=['background:linear-gradient(135deg,#fef9ec,#fde68a);border:2px solid #f59e0b;','background:linear-gradient(135deg,#f1f5f9,#e2e8f0);border:2px solid #94a3b8;','background:linear-gradient(135deg,#fff7ed,#fed7aa);border:2px solid #f97316;','background:rgba(255,255,255,.08);border:1.5px solid rgba(255,255,255,.15);','background:rgba(255,255,255,.05);border:1.5px solid rgba(255,255,255,.1);'];
  const rankTitleStyle=['color:#1e293b;','color:#1e293b;','color:#1e293b;','color:#a5b4fc;font-weight:700;','color:#94a3b8;font-weight:600;'];
  if (!top.length) { hof.innerHTML='<div class="video-hof-wrap"><div class="video-hof-title"><span class="hof-emoji">ğŸ‹</span><h3>ì¿ ìŠë­ ê°€ì´ë“œ</h3><p>ì˜ìƒì„ ë“±ë¡í•˜ê³  ì¢‹ì•„ìš”ë¥¼ ëˆŒëŸ¬ ìˆœìœ„ë¥¼ ë§Œë“¤ì–´ë³´ì„¸ìš”!</p></div></div>'; return; }
  const cards = top.map((v,i)=>{
    const cnt=likes[v.id]||0; const st=v.title.replace(/'/g,"\\'");
    if(cnt===0&&i>0) return '<div class="video-hof-empty"><div style="font-size:1.2rem;margin-bottom:5px;opacity:.4;">ğŸ‘‘</div><div style="font-size:.7rem;color:#64748b;">ì„ ì • ì¤‘</div></div>';
    return `<div class="video-hof-card" style="${rankBg[i]}" onclick="scrollToVideoCard('${st}')" title="${v.title}ìœ¼ë¡œ ì´ë™"><div class="hof-rank">${rankMedal[i]}</div><div class="hof-card-title" style="${rankTitleStyle[i]}">${v.title}</div><div class="hof-likes"><i class="fas fa-heart"></i> ${cnt}ëª…ì´ ì¶”ì²œí–ˆì–´ìš”</div><div class="hof-arrow"><i class="fas fa-arrow-down"></i> ì˜ìƒ ë³´ê¸°</div></div>`;
  }).join('');
  hof.innerHTML=`<div class="video-hof-wrap"><div class="video-hof-title"><span class="hof-emoji">ğŸ‹</span><h3>ì¿ ìŠë­ ê°€ì´ë“œ â€” ì¶”ì²œ TOP 5</h3><p>ì¢‹ì•„ìš” ë§ì€ ì˜ìƒ ìˆœìœ„ì—ìš”. ë§˜ì— ë“œëŠ” ì˜ìƒì— â¤ï¸ ë¥¼ ëˆŒëŸ¬ì£¼ì„¸ìš”!</p></div><div class="video-hof-grid">${cards}</div></div>`;
}
function scrollToVideoCard(title) {
  const allCards = document.querySelectorAll('.video-card'); let target=null;
  for(const c of allCards){const h4=c.querySelector('h4');if(h4&&h4.textContent.trim()===title){target=c;break;}}
  if(!target)return;
  const headerH=document.querySelector('.header')?.offsetHeight||72;
  const rect=target.getBoundingClientRect();
  window.scrollTo({top:window.pageYOffset+rect.top-headerH-16,behavior:'smooth'});
  target.style.transition='box-shadow .3s,outline .3s'; target.style.outline='2.5px solid #dc2626'; target.style.boxShadow='0 0 0 4px rgba(220,38,38,.25)';
  setTimeout(()=>{target.style.outline='';target.style.boxShadow='';},2000);
}

function loadVideos() {
  try { return JSON.parse(localStorage.getItem(STORAGE_KEY)) || []; }
  catch { return []; }
}
function saveVideos(arr) {
  localStorage.setItem(STORAGE_KEY, JSON.stringify(arr));
}

// ìœ íŠœë¸Œ URL â†’ embed URL ë³€í™˜
function toEmbedUrl(url) {
  url = url.trim();
  let videoId = null;
  const patterns = [
    /youtu\.be\/([A-Za-z0-9_-]{11})/,
    /youtube\.com\/watch\?.*v=([A-Za-z0-9_-]{11})/,
    /youtube\.com\/embed\/([A-Za-z0-9_-]{11})/,
    /youtube\.com\/shorts\/([A-Za-z0-9_-]{11})/,
  ];
  for (const p of patterns) {
    const m = url.match(p);
    if (m) { videoId = m[1]; break; }
  }
  return videoId ? `https://www.youtube.com/embed/${videoId}` : null;
}

// ìœ íŠœë¸Œ ì¸ë„¤ì¼
function toThumbUrl(embedUrl) {
  const m = embedUrl.match(/embed\/([A-Za-z0-9_-]{11})/);
  return m ? `https://img.youtube.com/vi/${m[1]}/mqdefault.jpg` : null;
}

function addVideo() {
  const title = document.getElementById('inputTitle').value.trim();
  const url   = document.getElementById('inputUrl').value.trim();
  const desc  = document.getElementById('inputDesc').value.trim();
  if (!title) { alert('ì œëª©ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.'); return; }
  const embedUrl = toEmbedUrl(url);
  if (!embedUrl) { alert('ì˜¬ë°”ë¥¸ ìœ íŠœë¸Œ URLì„ ì…ë ¥í•´ì£¼ì„¸ìš”.\nì˜ˆ: https://youtu.be/xxxxx'); return; }
  const videos = loadVideos();
  videos.unshift({ id: Date.now(), title, url, embedUrl, desc, date: new Date().toLocaleDateString('ko-KR') });
  saveVideos(videos);
  document.getElementById('inputTitle').value = '';
  document.getElementById('inputUrl').value = '';
  document.getElementById('inputDesc').value = '';
  renderVideos();
}

function deleteVideo(id) {
  if (!confirm('ì´ ì˜ìƒì„ ì‚­ì œí• ê¹Œìš”?')) return;
  saveVideos(loadVideos().filter(v => v.id !== id));
  renderVideos();
}

function handleCardClick(el) {
  const embedUrl = el.dataset.embed;
  const title = el.dataset.title;
  const originalUrl = el.dataset.url;
  openVideoModal(embedUrl, title, originalUrl);
}
function openVideoModal(embedUrl, title, originalUrl) {
  const iframe = document.getElementById('modalIframe');
  const errorDiv = document.getElementById('modalError');
  const player = iframe.parentElement;
  iframe.src = embedUrl + '?enablejsapi=1&rel=0&modestbranding=1';
  document.getElementById('modalTitle').textContent = title;
  const ytUrl = originalUrl || embedUrl.replace('embed/', 'watch?v=');
  document.getElementById('modalYoutubeLink').href = ytUrl;
  document.getElementById('modalErrorLink').href = ytUrl;
  errorDiv.style.display = 'none';
  player.style.display = 'block';
  document.getElementById('videoModal').classList.add('open');
  document.body.style.overflow = 'hidden';
}
function closeModal() {
  document.getElementById('videoModal').classList.remove('open');
  document.getElementById('modalIframe').src = '';
  document.body.style.overflow = '';
}
function closeVideoModal(e) { if (e.target === e.currentTarget) closeModal(); }

function renderVideos() {
  const q = (document.getElementById('searchInput')?.value || '').toLowerCase();
  const videos = loadVideos().filter(v => !q || v.title.toLowerCase().includes(q));
  const grid = document.getElementById('videoGrid');
  document.getElementById('videoCount').textContent = `${videos.length}ê°œì˜ ì˜ìƒ`;
  if (!videos.length) {
    grid.innerHTML = `<div class="video-empty"><i class="fab fa-youtube"></i><p>ë“±ë¡ëœ ì˜ìƒì´ ì—†ìŠµë‹ˆë‹¤</p><span>ìœ„ í¼ì—ì„œ ìœ íŠœë¸Œ URLì„ ë“±ë¡í•´ë³´ì„¸ìš”!</span></div>`;
    return;
  }
  grid.innerHTML = videos.map(v => {
    const thumb = toThumbUrl(v.embedUrl);
    const safeTitle = v.title.replace(/"/g,'&quot;');
    const safeEmbed = v.embedUrl;
    const safeUrl = v.url || v.embedUrl.replace('embed/','watch?v=');
    const likeCount = getLikeCount(v.id);
    const liked = isLikedByMe(v.id);
    return `
    <div class="video-card">
      <div class="video-thumb" data-embed="${safeEmbed}" data-title="${safeTitle}" data-url="${safeUrl}" onclick="handleCardClick(this)">
        ${thumb
          ? `<img src="${thumb}" style="position:absolute;inset:0;width:100%;height:100%;object-fit:cover;" alt="${v.title}">`
          : ''}
        <div style="position:absolute;inset:0;display:flex;align-items:center;justify-content:center;background:rgba(0,0,0,${thumb?'.3':'.7'})">
          <div style="width:52px;height:52px;background:#dc2626;border-radius:50%;display:flex;align-items:center;justify-content:center;box-shadow:0 4px 16px rgba(220,38,38,.5);">
            <i class="fas fa-play" style="color:#fff;font-size:1.2rem;margin-left:4px;"></i>
          </div>
        </div>
      </div>
      <div class="video-info">
        <h4>${v.title}</h4>
        ${v.desc ? `<p>${v.desc}</p>` : ''}
        <div class="video-meta">
          <span class="video-tag"><i class="fas fa-music"></i> ì¹´í”¼</span>
          <span class="video-date">${v.date}</span>
        </div>
        <div class="video-actions">
          <button class="btn-watch" data-embed="${safeEmbed}" data-title="${safeTitle}" data-url="${safeUrl}" onclick="handleCardClick(this)">
            <i class="fab fa-youtube"></i> ì˜ìƒ ë³´ê¸°
          </button>
          <button class="btn-like${liked?' liked':''}" onclick="toggleLike(${v.id})" title="ì¶”ì²œí•˜ê¸°">
            <i class="fas fa-heart"></i> ${likeCount > 0 ? likeCount : 'ì¶”ì²œ'}
          </button>
          <a href="${safeUrl}" target="_blank" rel="noopener" class="btn-delete-video" style="text-decoration:none;display:inline-flex;align-items:center;gap:4px;color:#dc2626;border-color:#fca5a5;background:#fff1f2;" title="YouTubeì—ì„œ ë³´ê¸°">
            <i class="fab fa-youtube"></i>
          </a>
          <button class="btn-delete-video" onclick="deleteVideo(${v.id})"><i class="fas fa-trash"></i></button>
        </div>
      </div>
    </div>`;
  }).join('');
}

// í–„ë²„ê±°
document.addEventListener('DOMContentLoaded', function() {
  renderVideos();
  renderVideoHof();
  const btn = document.getElementById('hamburgerBtn');
  const menu = document.getElementById('mobileMenu');
  if (btn && menu) {
    btn.addEventListener('click', () => { btn.classList.toggle('is-open'); menu.classList.toggle('is-open'); });
    document.addEventListener('click', e => { if (!btn.contains(e.target) && !menu.contains(e.target)) { btn.classList.remove('is-open'); menu.classList.remove('is-open'); }});
  }
});
</script>
</body>
</html>
